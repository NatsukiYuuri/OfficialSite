/*! typescript-cookie v1.0.6 | MIT */const C=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),T=e=>encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),y=decodeURIComponent,h=e=>(e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function A(e){return e=Object.assign({},e),typeof e.expires=="number"&&(e.expires=new Date(Date.now()+e.expires*864e5)),e.expires!=null&&(e.expires=e.expires.toUTCString()),Object.entries(e).filter(([t,n])=>n!=null&&n!==!1).map(([t,n])=>n===!0?`; ${t}`:`; ${t}=${n.split(";")[0]}`).join("")}function b(e,t,n){const c=/(?:^|; )([^=]*)=([^;]*)/g,o={};let i;for(;(i=c.exec(document.cookie))!=null;)try{const a=n(i[1]);if(o[a]=t(i[2],a),e===a)break}catch{}return e!=null?o[e]:o}const E=Object.freeze({decodeName:y,decodeValue:h,encodeName:C,encodeValue:T}),w=Object.freeze({path:"/"});function m(e,t,n=w,{encodeValue:c=T,encodeName:o=C}={}){return document.cookie=`${o(e)}=${c(t,e)}${A(n)}`}function p(e,{decodeValue:t=h,decodeName:n=y}={}){return b(e,t,n)}function I({decodeValue:e=h,decodeName:t=y}={}){return b(void 0,e,t)}function v(e,t=w){m(e,"",Object.assign({},t,{expires:-1}))}function f(e,t){const n={set:function(o,i,a){return m(o,i,Object.assign({},this.attributes,a),{encodeValue:this.converter.write})},get:function(o){if(arguments.length===0)return I(this.converter.read);if(o!=null)return p(o,this.converter.read)},remove:function(o,i){v(o,Object.assign({},this.attributes,i))},withAttributes:function(o){return f(this.converter,Object.assign({},this.attributes,o))},withConverter:function(o){return f(Object.assign({},this.converter,o),this.attributes)}},c={attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}};return Object.create(n,c)}f({read:E.decodeValue,write:E.encodeValue},w);class M{constructor(){this.STAMP_RES_PATH="../assets/res/others/202508event/inkan.png",this.GRACE_TIME=40,this.Init()}async Init(){const t=await this.PopSetTimeWindowAsync(),n=document.getElementById("calendar-days");if(n){const c=new Date,o=6,i=c.getFullYear(),a={},g=new Date(i,o,1).getDay();for(let s=0;s<g;s++){const r=document.createElement("div");r.classList.add("_day","_empty"),n.append(r)}const d=new Date(i,o+1,0).getDate();for(let s=0;s<d;s++){const r=document.createElement("div");r.classList.add("_day"),n.append(r);const l=new Date(i,o,s+1).getDay();r.textContent=(s+1).toString(),(l==6||l==0||s+1==11)&&r.classList.add("_empty"),a[s+1]=r}const D=new Date(i,o+1,0).getDay();for(let s=0;s<7-D-1;s++){const r=document.createElement("div");r.classList.add("_day","_empty"),n.append(r)}const u=this.GetDaysCookie();for(let s=0;s<u.length;s++){const r=u[s],l=document.createElement("img");l.src=this.STAMP_RES_PATH,a[r].append(l)}if(this.isWithinMinutes(t,this.GRACE_TIME)){const s=c.getDate();u.includes(s)||u.push(s),this.SetDaysCookie(u);const r=document.createElement("img");r.src=this.STAMP_RES_PATH,a[s].append(r)}}}async PopSetTimeWindowAsync(){const t="referenceTime",n=new Date;return new Promise((c,o)=>{const i=p(t);i==null?(console.log("targetが見つかりません"),document.getElementById("set-time-window-button").addEventListener("click",g=>{const d=document.getElementById("set-time-window-time");if(/^([01]\d|2[0-3]):[0-5]\d$/.test(d.value)){m(t,d.value,{expires:n.setMonth(n.getMonth()+2)}),document.getElementById("set-time-window").style.display="none",c(d.value);return}console.log("時間が有効ではありません")})):(document.getElementById("set-time-window").style.display="none",c(i))})}SetDaysCookie(t){const n=new Date;m("days",JSON.stringify(t),{expires:n.setMonth(n.getMonth()+2)})}GetDaysCookie(){const t=p("days");return t==null?[]:JSON.parse(t)}isWithinMinutes(t,n){const c=new Date,[o,i]=t.split(":").map(Number),a=new Date(c.getFullYear(),c.getMonth(),c.getDate(),o,i);return Math.abs(a.getTime()-c.getTime())<=n*60*1e3}}new M;
